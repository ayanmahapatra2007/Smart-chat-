// ЁЯФК Voice Function (ржмрж╛ржВрж▓рж╛ ржнрзЯрзЗрж╕рзЗ ржЙрждрзНрждрж░ ржжрзЗржУрзЯрж╛рж░ ржЬржирзНржп)
function speak(message) {
  const utterance = new SpeechSynthesisUtterance(message);
  utterance.lang = "bn-BD"; // ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛
  speechSynthesis.speak(utterance);
}

// ЁЯЧгя╕П Bot ржПрж░ ржЙрждрзНрждрж░ ржжрзЗржЦрж╛рзЯ ржУ Voice ржЪрж╛рж▓рж╛рзЯ
function botReply(message) {
  const chatBox = document.getElementById("chat-box");
  const para = document.createElement("p");
  para.textContent = "ЁЯдЦ " + message;
  chatBox.appendChild(para);
  speak(message); // ржнрзЯрзЗрж╕рзЗ ржЙрждрзНрждрж░ ржмрж▓рзЗ
}

// ЁЯУй Message ржкрж╛ржарж╛ржирзЛ рж╣рж▓рзЗ ржХрзА рж╣ржмрзЗ
function sendMessage() {
  const input = document.getElementById("user-input");
  let userInput = input.value.toLowerCase().trim();
  input.value = "";

  const replies = [
    // ЁЯза рж╕рж╛ржзрж╛рж░ржг ржкрзНрж░рж╢рзНржи
    { keywords: ["рж╣рзНржпрж╛рж▓рзЛ", "рж╣рж╛ржЗ", "hello", "hi"], reply: "рж╣рзНржпрж╛рж▓рзЛ! рждрзЛржорж╛рж░ рж╕ржЩрзНржЧрзЗ ржХржерж╛ ржмрж▓рзЗ ржнрж╛рж▓рзЛ рж▓рж╛ржЧржЫрзЗ ЁЯШК ржкрзНрж░рж╢рзНржи ржХрж░рзЛред" },
    { keywords: ["рждрзЛржорж╛рж░ ржирж╛ржо ржХрж┐", "рждрзБржорж┐ ржХрзЗ"], reply: "ржЖржорж╛рж░ ржирж╛ржо ChatBot, ржЖржорж┐ рждрзЛржорж╛рж░ ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржмржирзНржзрзБ ЁЯдЦ" },
    { keywords: ["рждрзЛржорж╛ржХрзЗ ржХрзЗ ржмрж╛ржирж┐ржпрж╝рзЗржЫрзЗ"], reply: "ржЖржорж╛ржХрзЗ ржмрж╛ржирж┐ржпрж╝рзЗржЫрзЗ Ayan Mahapatra ЁЯЫая╕П" },
    { keywords: ["ржХрзЗржоржи ржЖржЫрзЛ"], reply: "ржЖржорж┐ ржнрж╛рж▓рзЛ ржЖржЫрж┐, рждрзБржорж┐ ржХрзЗржоржи ржЖржЫрзЛ? ЁЯШК" },
    { keywords: ["ржЖржЬржХрзЗ ржХрж┐ ржжрж┐ржи"], reply: "ржЖржЬржХрзЗ рж╣рж▓рзЛ " + new Date().toLocaleDateString('bn-BD', { weekday: 'long' }) },
    { keywords: ["ржПржЦржи ржХржЯрж╛ ржмрж╛ржЬрзЗ", "рж╕ржоржпрж╝ ржХрждрзЛ"], reply: "ржПржЦржи рж╕ржоржпрж╝ " + new Date().toLocaleTimeString('bn-BD') },

    // ЁЯЗоЁЯЗ│ ржнрж╛рж░ржд ржУ ржкрж╢рзНржЪрж┐ржоржмржЩрзНржЧ
    { keywords: ["ржнрж╛рж░рждрзЗрж░ ржкрзНрж░ржзрж╛ржиржоржирзНрждрзНрж░рзА ржХрзЗ"], reply: "ржнрж╛рж░рждрзЗрж░ ржкрзНрж░ржзрж╛ржиржоржирзНрждрзНрж░рзА рж╣рж▓рзЗржи ржирж░рзЗржирзНржжрзНрж░ ржорзЛржжрж┐ ЁЯЗоЁЯЗ│" },
    { keywords: ["ржкрж╢рзНржЪрж┐ржоржмржЩрзНржЧрзЗрж░ ржорзБржЦрзНржпржоржирзНрждрзНрж░рзА ржХрзЗ"], reply: "ржкрж╢рзНржЪрж┐ржоржмржЩрзНржЧрзЗрж░ ржорзБржЦрзНржпржоржирзНрждрзНрж░рзА рж╣рж▓рзЗржи ржоржорждрж╛ ржмрзНржпрж╛ржирж╛рж░рзНржЬрж┐ ЁЯСйтАНтЪЦя╕П" },
    { keywords: ["ржнрж╛рж░рждрзЗрж░ ржЬрж╛рждрзАржпрж╝ ржкрждрж╛ржХрж╛рж░ рж░ржВ ржХрж┐ ржХрж┐"], reply: "ржЧрзЗрж░рзБржпрж╝рж╛, рж╕рж╛ржжрж╛, рж╕ржмрзБржЬ ржПржмржВ ржорж╛ржЭржЦрж╛ржирзЗ ржЕрж╢рзЛржХ ржЪржХрзНрж░ ЁЯЗоЁЯЗ│" },
    { keywords: ["ржЬрж╛рждрзАржпрж╝ ржкрж╢рзБ ржХрж┐"], reply: "рж░ржпрж╝рзЗрж▓ ржмрзЗржЩрзНржЧрж▓ ржЯрж╛ржЗржЧрж╛рж░ ЁЯРЕ" },
    { keywords: ["ржЬрж╛рждрзАржпрж╝ ржлрзБрж▓ ржХрж┐"], reply: "ржкржжрзНржо ржлрзБрж▓ (Lotus) ЁЯМ╕" },
    { keywords: ["ржЬрж╛рждрзАржпрж╝ ржкрж╛ржЦрж┐ ржХрж┐"], reply: "ржоржпрж╝рзВрж░ ЁЯжЪ" },
    { keywords: ["ржкрж╢рзНржЪрж┐ржоржмржЩрзНржЧрзЗрж░ рж░рж╛ржЬржзрж╛ржирзА ржХрзЛржерж╛ржпрж╝"], reply: "ржХрж▓ржХрж╛рждрж╛" },
    { keywords: ["ржкрж╢рзНржЪрж┐ржоржмржЩрзНржЧрзЗ ржХрждржЧрзБрж▓рзЛ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓ржпрж╝ ржЖржЫрзЗ"], reply: "ржкрзНрж░рж╛ржпрж╝ рзйрзжржЯрж┐рж░ржУ ржмрзЗрж╢рж┐ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓ржпрж╝ ржЖржЫрзЗ ЁЯУШ" },

    // ЁЯФм ржмрж┐ржЬрзНржЮрж╛ржи
    { keywords: ["рж╕рзВрж░рзНржп ржХрж┐ ржПржХржЯрж┐ ржЧрзНрж░рж╣"], reply: "ржирж╛, рж╕рзВрж░рзНржп ржПржХржЯрж┐ рждрж╛рж░рж╛ (Star)" },
    { keywords: ["рж░ржХрзНржд рж▓рж╛рж▓ ржХрзЗржи"], reply: "рж╣рж┐ржорзЛржЧрзНрж▓рзЛржмрж┐ржи ржерж╛ржХрж╛рж░ ржЬржирзНржп рж░ржХрзНржд рж▓рж╛рж▓ рж╣рзЯ" },
    { keywords: ["ржкрж╛ржирж┐рж░ рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ рж╕ржВржХрзЗржд ржХрж┐"], reply: "HтВВO ЁЯТз" },
    { keywords: ["ржЖрж▓рзЛрж░ ржЧрждрж┐ ржХржд"], reply: "ржЖрж▓рзЛрж░ ржЧрждрж┐ рж╣рж▓рзЛ ржкрзНрж░рж╛ржпрж╝ рзй рж▓ржХрзНрж╖ ржХрж┐ржорж┐/рж╕рзЗржХрзЗржирзНржб" },
    { keywords: ["ржЧрж╛ржЫ ржЦрж╛ржжрзНржп рждрзИрж░рж┐ ржХрж░рзЗ ржХрж┐ржнрж╛ржмрзЗ"], reply: "рж╕рж╛рж▓рзЛржХрж╕ржВрж╢рзНрж▓рзЗрж╖ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржпрж╝ ржЦрж╛ржжрзНржп рждрзИрж░рж┐ рж╣рзЯ" },
    { keywords: ["ржЪрж╛ржБржжрзЗ ржХрзЗ ржкрзНрж░ржержо ржкрж╛ рж░рзЗржЦрзЗржЫрзЗржи"], reply: "ржирзАрж▓ ржЖрж░рзНржорж╕рзНржЯрзНрж░ржВ, рззрзпрзмрзп рж╕рж╛рж▓рзЗ ЁЯЪА" },

    // ЁЯФв ржЕржЩрзНржХ ржУ рж╕рзВрждрзНрж░
    { keywords: ["(a+b)^2 ржПрж░ ржорж╛ржи ржХрж┐"], reply: "(a + b)┬▓ = a┬▓ + 2ab + b┬▓" },
    { keywords: ["(a-b)^2 ржПрж░ ржорж╛ржи ржХрж┐"], reply: "(a - b)┬▓ = a┬▓ - 2ab + b┬▓" },
    { keywords: ["(a+b)(a-b) ржорж╛ржирзЗ ржХрж┐"], reply: "(a + b)(a - b) = a┬▓ - b┬▓" },
    { keywords: ["ржЧрждрж┐"], reply: "ржЧрждрж┐ = ржжрзВрж░рждрзНржм ├╖ рж╕ржоржпрж╝" },
    { keywords: ["рждрзНрж░рж┐ржнрзБржЬрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░ржлрж▓"], reply: "┬╜ ├Ч base ├Ч height" },
    { keywords: ["ржмрзГрждрзНрждрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░ржлрж▓"], reply: "╧А ├Ч r┬▓" },
    { keywords: ["ржЧржбрж╝ ржХрж╛ржХрзЗ ржмрж▓рзЗ"], reply: "ржорзЛржЯ ржорж╛ржи ├╖ ржорзЛржЯ рж╕ржВржЦрзНржпрж╛" },

    // ЁЯНЛ ржлрж▓ ржУ ржЕрзНржпрж╛рж╕рж┐ржб
    { keywords: ["ржЖржкрзЗрж▓рзЗ ржХрзЛржи ржЕрзНржпрж╛рж╕рж┐ржб ржерж╛ржХрзЗ"], reply: "ржорзНржпрж╛рж▓рж┐ржХ ржЕрзНржпрж╛рж╕рж┐ржб ЁЯНО" },
    { keywords: ["рж▓рзЗржмрзБрждрзЗ ржХрзЛржи ржЕрзНржпрж╛рж╕рж┐ржб ржерж╛ржХрзЗ"], reply: "рж╕рж┐ржЯрзНрж░рж┐ржХ ржЕрзНржпрж╛рж╕рж┐ржб ЁЯНЛ" },
    { keywords: ["ржХржорж▓рж╛рж▓рзЗржмрзБрждрзЗ ржЕрзНржпрж╛рж╕рж┐ржб"], reply: "рж╕рж┐ржЯрзНрж░рж┐ржХ ржЕрзНржпрж╛рж╕рж┐ржб ЁЯНК" },
    { keywords: ["ржЖржЩрзБрж░рзЗ ржЕрзНржпрж╛рж╕рж┐ржб ржХрж┐"], reply: "ржЯрж╛рж░ржЯрж╛рж░рж┐ржХ ржЕрзНржпрж╛рж╕рж┐ржб ЁЯНЗ" },

    // ЁЯРЯ ржкрзНрж░рж╛ржгрзА
    { keywords: ["catla ржорж╛ржЫрзЗрж░ ржмрзИржЬрзНржЮрж╛ржирж┐ржХ ржирж╛ржо ржХрж┐"], reply: "Catla catla ЁЯРЯ" },
    { keywords: ["ржорж╛ржирзБрж╖рзЗрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржмржбрж╝ ржЕржЩрзНржЧ ржХрж┐"], reply: "рждрзНржмржХ (Skin)" },

    // ЁЯПл рж╕рзНржХрзБрж▓
    { keywords: ["рж╕рзНржХрзБрж▓рзЗ ржХрзЗржи ржпрж╛ржЗ"], reply: "ржЬрзНржЮрж╛ржи ржЕрж░рзНржЬржирзЗрж░ ржЬржирзНржп рж╕рзНржХрзБрж▓рзЗ ржпрж╛ржЗ ЁЯПл" },
    { keywords: ["рж╢рж┐ржХрзНрж╖ржХ ржжрж┐ржмрж╕ ржХржмрзЗ"], reply: "рзлржЗ рж╕рзЗржкрзНржЯрзЗржорзНржмрж░" },
    { keywords: ["ржнрж╛рж▓рзЛ ржЫрж╛рждрзНрж░рзЗрж░ ржЧрзБржгрж╛ржмрж▓рж┐"], reply: "ржирж┐ржпрж╝ржорж┐ржд ржкржбрж╝рж╛рж╢рзЛржирж╛, рж╢рзГржЩрзНржЦрж▓рж╛, рж╕рждрждрж╛" },

    // ЁЯУ░ ржЦржмрж░
    { keywords: ["plane crash", "ржкрзНрж▓рзЗржи ржжрзБрж░рзНржШржЯржирж╛"], reply: "рж╕ржорзНржкрзНрж░рждрж┐ ржЖрж╣ржорзЗржжрж╛ржмрж╛ржжрзЗ ржПржХржЯрж┐ ржкрзНрж▓рзЗржи ржжрзБрж░рзНржШржЯржирж╛ рж╣ржпрж╝рзЗржЫрзЗред" }
  ];

  // тЮХтЮЦ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи рж╕рж╛ржкрзЛрж░рзНржЯ
  if (/^[0-9+\-*/xX├╖. ]+$/.test(userInput)) {
    try {
      let expression = userInput.replace(/x|X/gi, "*").replace(/├╖/g, "/");
      let result = eval(expression);
      botReply("ржЙрждрзНрждрж░ рж╣рж▓рзЛ: " + result);
      return;
    } catch {
      botReply("ржЕржЩрзНржХ ржмрзБржЭрждрзЗ ржкрж╛рж░рж┐ржирж┐ред ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЛ ЁЯФв");
      return;
    }
  }

  // ЁЯФН ржкрзНрж░рж╢рзНржи ржорж┐рж▓рж┐рзЯрзЗ ржЙрждрзНрждрж░ ржЦрзЛржБржЬрж╛
  for (let item of replies) {
    for (let key of item.keywords) {
      if (userInput.includes(key)) {
        botReply(item.reply);
        return;
      }
    }
  }

  // ЁЯд╖ fallback ржЙрждрзНрждрж░
  botReply("Ayan amake eta sekhayni, ami pore bole debo ЁЯЩП");
}
